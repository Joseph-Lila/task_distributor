#: import ak asynckivy


<TasksLogScreenView>:
    icon: 'book-open-outline'
    text: 'Tasks Log'

    task_log_screen_manager: task_log_screen_manager
    data_table_cont: data_table_cont
    drop_item: drop_item
    title_field: title_field
    date_field: date_field
    period_field: period_field
    description_field: description_field
    estimation_field: estimation_field
    task_type_drop_item: task_type_drop_item
    common_title_field: common_title_field
    measure_field: measure_field

    ScreenManager:
        id: task_log_screen_manager

        MDScreen:
            name: 'table'

            MDBoxLayout:
                orientation: 'vertical'
                padding: 25, 25, 25, 25
                spacing: 10

                BoxLayout:
                    size_hint_y: .15

                    AnchorLayout:

                        MDDropDownItem:
                            id: drop_item
                            pos_hint: {'center_x': .5, 'center_y': .5}
                            on_release: root.task_types_menu.open()

                    AnchorLayout:
                        size_hint_x: .3

                        TooltipMDIconButton:
                            icon: 'minus-circle-outline'
                            tooltip_text: 'Remove marked tasks'
                            pos_hint: {"center_x": .5, "center_y": .5}
                            theme_icon_color: "Custom"
                            icon_color: 0, 141/255, 142/255, 1

                    AnchorLayout:
                        size_hint_x: .3

                        TooltipMDIconButton:
                            icon: 'plus-circle-outline'
                            tooltip_text: 'Add task'
                            pos_hint: {"center_x": .5, "center_y": .5}
                            theme_icon_color: "Custom"
                            icon_color: 0, 141/255, 142/255, 1
                            on_release: root.controller.go_to_creation_screen()

                MDBoxLayout:
                    id: data_table_cont


        MDScreen:
            name: 'tasks fields screen'

            BoxLayout:
                orientation: 'vertical'

                MDCard:
                    orientation: 'vertical'

                    ScrollView:
                        size: self.size

                        MDGridLayout:
                            id: grid

                            cols: 1
                            size_hint_y: None
                            row_default_height: '60dp'
                            adaptive_height:True
                            spacing: 3, 3
                            padding: 10, 10, 10, 10

                            MyTextField:
                                id: title_field
                                hint_text: 'title'
                                icon: 'format-title'
                                disabled: False

                            DateField:
                                id: date_field
                                view: root
                                hint_text: 'deadline'

                            MyTextField:
                                id: period_field
                                hint_text: 'period'
                                text: '-1'
                                icon: 'sync-circle'
                                input_filter: 'int'
                                disabled: False

                            MyTextField:
                                id: description_field
                                hint_text: 'description'
                                icon: 'details'
                                disabled: False

                            MyTextField:
                                id: estimation_field
                                text: '0'
                                hint_text: 'estimation'
                                icon: 'crosshairs'
                                input_filter: 'int'
                                disabled: False

                            BoxLayout:
                                size_hint_y: None
                                height: task_type_drop_item.height

                                AnchorLayout:

                                    MDLabel:
                                        halign: 'center'
                                        text: 'Task Type:'

                                AnchorLayout:

                                    MDDropDownItem:
                                        id: task_type_drop_item
                                        on_release: root.task_types_menu_for_cur_task.open()

                            MDLabel:
                                halign: 'center'
                                pos_hint: {'center_x': .5, 'center_y': .5}
                                text: 'Complex part'

                            MyTextField:
                                id: common_title_field
                                hint_text: 'common title'
                                icon: 'format-title'
                                disabled: False

                            MyTextField:
                                id: measure_field
                                hint_text: 'measure (items per min)'
                                icon: 'tape-measure'
                                disabled: False

                            AnchorLayout:

                                MDIconButton:
                                    icon: 'shield-moon-outline'
                                    theme_icon_color: "Custom"
                                    icon_color: 0, 141/255, 142/255, 1
                                    on_release: root.controller.go_to_units_screen()

                ScreenManager:
                    size_hint_y: .15

                    MDScreen:
                        name: 'add'

                        BoxLayout:

                            AnchorLayout:

                                MDTextButton:
                                    text: 'Cancel'
                                    on_release:
                                        root.controller.go_to_table_screen()

                            AnchorLayout:

                                MDTextButton:
                                    text: 'Add'
                                    on_release:
                                        ak.start(root.prepare_data_for_adding())

        MDScreen:
            name: 'units screen'

            BoxLayout:
                orientation: 'vertical'

                AnchorLayout:
                    size_hint_y: .15

                    MDIconButton:
                        icon: 'door'
                        on_release: root.controller.go_to_creation_screen()

                MDCard:
